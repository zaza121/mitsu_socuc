<odoo>

	<record id="view_partner_form_opsol" model="ir.ui.view">
        <field name="name">res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            
            <page name="sales_purchases" position="before">
                <page string="Gestion Commerciale" name="gescom_tab" groups="account.group_account_invoice,account.group_account_readonly">
                    <field name="duplicated_bank_account_partners_count" invisible="1"/>
                    <field name="show_credit_limit" invisible="1"/>
                    <group>
                        <group string="Infos">
                            <field name="gescom_map_commercial" invisible="True" />
                            <field name="zone_id" />
                            <field name="ana_acc_id" invisible="True" />
                            <field name="type_cafe" />
                        </group>
                        <group string="Options Commerciales" name="gp_comm_op">
                            <field name="gratuite" />
                            <field name="facturer_intervention" />
                            <field name="do_avance_remise" />
                        </group>
                        <group string="Dates">
                            <field name="gescom_created_date" />
                            <field name="date_debut" invisible="not do_avance_remise" required="do_avance_remise" />
                            <field name="date_fin" invisible="not do_avance_remise" required="do_avance_remise" />
                            <field name="jour_tournee" />
                            <field name="jours_fermeture_ids" widget="many2many_tags"/>

                            <field name="heure_ouverture_text" />
                            
                            <!-- <label for="heure_ouverture" string="Heures d'ouverture"/>
                            <div class="o_row" name="open_hours">
                                <field name="heure_ouverture" widget="float_time"/> - 
                                <field name="heure_fermeture" widget="float_time"/>
                            </div> -->
                            
                            <field name="client_sur_tel" />
                        </group>
                        <group string="Estimation">
                            <field name="c_amount" invisible="not do_avance_remise"/>
                            <field name="kg_by_sem" invisible="not do_avance_remise"/>
                            <field name="euro_by_kg" invisible="not do_avance_remise"/>
                            <field name="kg_total_prevu" invisible="not do_avance_remise"/>
                            <label for="estimation_qty" string="Quantite"/>
                            <div class="o_row" name="weight">
                                <field name="estimation_qty" class="oe_inline"/>
                                <field name="estimation_uom_id"/>
                            </div>
                        </group>
                        <group string="Frais de transport">
                            <field name="transport_product_id" domain="[('type', '=', 'service')]" context="{'default_type': 'service'}"/>
                            <field name="transport_amount" />
                        </group>
                        <group string="Frais divers">
                            <field name="frais_facturation" invisible="1" />
                            <field name="facturation_product_id" domain="[('type', '=', 'service')]" context="{'default_type': 'service'}"/>
                            <field name="facturation_amount" />
                        </group>
                    </group>
                </page>
            </page>

            <xpath expr="//field[@name='parent_id']/.." position="after">
                <h2>
                    <label for="ccmx" />
                    <field name="ccmx" />
                </h2>

                <label for="tier_parent_id" />
                <field name="tier_parent_id" />
                <br/>
                <label for="enseigne" />
                <field name="enseigne" />
            </xpath>

            <xpath expr="//field[@name='vat']/.." position="after">
                <field name="redressement_jud" />
                <field name="date_redr_jud" required="redressement_jud" invisible="not redressement_jud"/>
            </xpath>

            <div name="button_box" position="inside">
                <button name="action_open_equipments" type="object" class="oe_stat_button" icon="fa-motorcycle" groups="client_equipment.group_client_equipment_user" invisible="equipments_count == 0">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_value"><field name="equipments_count"/></span>
                        <span class="o_stat_text">Equipments</span>
                    </div>
                </button>

                <button name="action_open_salelines" type="object" class="oe_stat_button" icon="fa-usd" groups="sales_team.group_sale_salesman" invisible="sale_order_count == 0">
                    <div class="o_field_widget o_stat_info">
                        <span class="o_stat_text">Historique des prix</span>
                    </div>
                </button>
            </div>

            <xpath expr="//notebook[1]" position="inside">
                <page string="Metriques Actuelles" name="tab_metric">
                    <field name="lines_metric_ids" nolabel="1" context="{'default_equipment_id': id}">
                        <list editable="bottom">
                            <field name="equipment_id" />
                            <field name="metric_id"/>
                            <field name="reference_intervention"/>
                            <field name="uom_id"/>
                            <field name="current_measure"/>
                            <field name="progress_metric" widget="percentage" column_invisible="1"/>
                            <field name="progress_metric_per" widget="badge" decoration-danger="progress_metric &gt; 1" decoration-success="progress_metric &lt; 0.9" decoration-warning="progress_metric &lt;= 1 and progress_metric &gt;= 0.9"/>
                            <field name="equipment_id" />
                            <field name="partner_id" column_invisible="1"/>
                        </list>
                    </field>
                </page>
            </xpath>

        </field>
    </record>

    <record id="view_res_partner_filter_opsol" model="ir.ui.view">
        <field name="name">res.partner.search</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="ccmx" />
            </field>

            <field name="name" position="replace">
                <field name="name" filter_domain="['|', '|', '|', '|', '|', ('complete_name', 'ilike', self), ('ref', '=', self), ('email', 'ilike', self), ('vat', 'ilike', self), ('company_registry', 'ilike', self), ('ccmx','ilike',self)]"/>
            </field>


        </field>
    </record>

</odoo>